update_length = Math.min(length_by_path.get(Arrays.asList(i,j)),
 sumLengths(length_by_path.get(Arrays.asList(i,k)), length_by_path.get(Arrays.asList(k,j))));
