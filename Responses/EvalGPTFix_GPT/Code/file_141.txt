import java.util.Scanner;

            public class Main {
                public static void main(String[] args) {
                    boolean result = false; // Initially set to false.
                    Scanner sc = new Scanner(System.in);
                    int n = sc.nextInt();
                    int[][] a = new int[n][n];
                    int[][] b = new int[n][n];
                    for (int i = 0; i < n; i++) {
                        for (int j = 0; j < n; j++) {
                            a[i][j] = sc.nextInt();
                        }
                    }
                    for (int i = 0; i < n; i++) {
                        for (int j = 0; j < n; j++) {
                            b[i][j] = sc.nextInt();
                        }
                    }

                    // Checking all conditions for two matrix not matching
                    boolean allConditionsFalse = false;

                    // Loop through matrices to check different conditions
                    if (!allConditionsFalse) {
                        allConditionsFalse = true; // We assume false until proven one match
                        for (int i = 0; i < n; i++) {
                            for (int j = 0; j < n; j++) {
                                if (a[i][j] == b[i][j]) {
                                    allConditionsFalse = false; // Found a match
                                    break;
                                }
                            }
                            if (!allConditionsFalse) {
                                break;
                            }
                        }
                    }

                    if (!allConditionsFalse) {
                        allConditionsFalse = true;
                        for (int i = 0; i < n; i++) {
                            for (int j = 0; j < n; j++) {
                                if (a[n - 1 - j][i] == b[i][j]) {
                                    allConditionsFalse = false;
                                    break;
                                }
                            }
                            if (!allConditionsFalse) {
                                break;
                            }
                        }
                    }

                    if (!allConditionsFalse) {
                        allConditionsFalse = true;
                        for (int i = 0; i < n; i++) {
                            for (int j = 0; j < n; j++) {
                                if (a[n - 1 - i][n - 1 - j] == b[i][j]) {
                                    allConditionsFalse = false;
                                    break;
                                }
                            }
                            if (!allConditionsFalse) {
                                break;
                            }
                        }
                    }
                    if (!allConditionsFalse) {
                        allConditionsFalse = true;
                        for (int i = 0; i < n; i++) {
                            for (int j = 0; j < n; j++) {
                                if (a[j][n - 1 - i] == b[i][j]) {
                                    allConditionsFalse = false;
                                    break;
                                }
                            }
                            if (!allConditionsFalse) {
                                break;
                            }
                        }
                    }
                    result = !allConditionsFalse; // Set result based on all conditions check

                    if (result) {
                        System.out.println("Yes");
                    } else {
                        System.out.println("No");
                    }
                }
            }