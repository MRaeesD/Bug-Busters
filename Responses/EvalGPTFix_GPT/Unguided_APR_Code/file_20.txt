import java.util.*;
            import java.io.*;
            import java.math.*;

            public class Main {
            	public static void main(String args[] ) throws Exception {
            		BufferedReader br = new BufferedReader( new InputStreamReader( System.in ) ) ;
            		int Q = Integer.parseInt(br.readLine().trim());

            		long v = 1; 
            		long mod = 998244353L;
            		long b = 1;
            		long bx = BigInteger.TEN.modInverse(BigInteger.valueOf(mod)).longValue();

            		Deque<Integer> deque = new ArrayDeque<>(); 
            		deque.addLast(1);

            		for (int i = 0; i < Q; i++) {
            			String S = br.readLine().trim();
            			switch(S.charAt(0)) {
            				case '1':
            					String[] ss = S.split(" ");
            					int r = Integer.parseInt(ss[1]);
            					deque.addLast(r);
            					b = (b * 10) % mod;
            					v = (v * 10 + r) % mod;
            					break;
            				case '2':
            					int c = deque.removeFirst();
            					v -= (b * c) % mod;
            					v = (v + mod) % mod;

            					b = (b * bx) % mod;
            					break;
            				case '3':
            					System.out.println(v);
            					break;
            			}
            		}
            		br.close();
            	}
            }