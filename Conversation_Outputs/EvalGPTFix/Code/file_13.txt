if (!deque.isEmpty()) { // Check if deque is empty
    int upper = deque.pollFirst();
    number = (number - upper * modPow(10, deque.size(), mod) + mod) % mod; // Ensure number is non-negative
}