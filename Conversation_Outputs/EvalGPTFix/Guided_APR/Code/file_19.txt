import java.util.*;
import java.io.*;
import java.math.*;

public class Main {
    public static void main(String args[] ) throws Exception {

        BufferedReader br = new BufferedReader( new InputStreamReader( System.in ) ) ;
        int Q = Integer.valueOf ( br.readLine().trim() ) ;
        
        long v = 1 ; 
        long mod =  998244353L ;
        long b = 1 ;
        long bx = BigInteger.TEN.modInverse( BigInteger.valueOf( mod ) ).longValue() ;

        // Use Deque for efficient add and remove operations from both ends
        Deque<Integer> list = new ArrayDeque<>(); //bug fixed here
        list.add(1);
        for (int i = 0; i < Q; i++) {
            String S = br.readLine().trim();
            switch (S.charAt(0)) {
                case '1':
                    String[] ss = S.split(" ");
                    int r = Integer.valueOf(ss[1]);
                    list.addLast(r); // Add to the end
                    b = (b * 10) % mod;
                    v = (v * 10 + r) % mod;
                    break;
                case '2':
                    int c = list.removeFirst(); // Remove from the beginning
                    v -= (b * c) % mod;
                    v = (v + mod) % mod;
                        
                    b = (b * bx) % mod;
                    break;
                case '3':
                    System.out.println(v);
                    break;
            }
        }
        br.close();
    }
}