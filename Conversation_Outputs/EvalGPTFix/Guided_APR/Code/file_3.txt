if (type == 2) {
    long f = d.pollFirst();
    length -= 1; // Decrement length BEFORE calculating the power
    f *= c[length]; // Use the updated length here
    f %= mod;
    current -= f;
    if (current < 0) {
        current += mod;
    }
    current %= mod;
    continue;
}