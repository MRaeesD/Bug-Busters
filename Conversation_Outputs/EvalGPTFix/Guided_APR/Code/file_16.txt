else if (query.type == 2) {
    int len = deque.size();
    long m = mods[len] * deque.pollFirst();
    val = ((val - m) % MOD + MOD) % MOD; // Ensure non-negative result
}